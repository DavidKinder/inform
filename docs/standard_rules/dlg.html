<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<title>Dialogue</title>
<link href="../docs-assets/Breadcrumbs.css" rel="stylesheet" rev="stylesheet" type="text/css">
		<meta name="viewport" content="width=device-width initial-scale=1">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta http-equiv="Content-Language" content="en-gb">

<link href="../docs-assets/Contents.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Progress.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Navigation.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Fonts.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Base.css" rel="stylesheet" rev="stylesheet" type="text/css">
<script src="http://code.jquery.com/jquery-1.12.4.min.js"
	integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>

<script src="../docs-assets/Bigfoot.js"></script>
<link href="../docs-assets/Bigfoot.css" rel="stylesheet" rev="stylesheet" type="text/css">
<link href="../docs-assets/Colours.css" rel="stylesheet" rev="stylesheet" type="text/css">
		
	</head>
	<body class="commentary-font">
		<nav role="navigation">
		<h1><a href="../index.html"><img src="../docs-assets/Inform.png" height=72> </a></h1>
<ul><li><a href="../index.html">home</a></li>
</ul><h2>Compiler</h2><ul>
<li><a href="../structure.html">structure</a></li>
<li><a href="../inbuildn.html">inbuild</a></li>
<li><a href="../inform7n.html">inform7</a></li>
<li><a href="../intern.html">inter</a></li>
<li><a href="../services.html">services</a></li>
<li><a href="../secrets.html">secrets</a></li>
</ul><h2>Other Tools</h2><ul>
<li><a href="../inblorbn.html">inblorb</a></li>
<li><a href="../inform6.html">inform6</a></li>
<li><a href="../inpolicyn.html">inpolicy</a></li>
</ul><h2>Resources</h2><ul>
<li><a href="../extensions.html">extensions</a></li>
<li><a href="../kits.html">kits</a></li>
</ul><h2>Repository</h2><ul>
<li><a href="https://github.com/ganelson/inform"><img src="../docs-assets/github.png" height=0> github</a></li>
</ul><h2>Related Projects</h2><ul>
<li><a href="https://github.com/ganelson/inweb"><img src="../docs-assets/github.png" height=0> inweb</a></li>
<li><a href="https://github.com/ganelson/intest"><img src="../docs-assets/github.png" height=0> intest</a></li>
</ul>
		</nav>
		<main role="main">
		<!-- Weave of 'Dialogue' generated by inweb -->
<div class="breadcrumbs">
    <ul class="crumbs"><li><a href="../index.html">Home</a></li><li><a href="../extensions.html">Extensions</a></li><li><a href="index.html">Standard Rules</a></li><li><b>Dialogue</b></li></ul></div>
<p class="purpose">Miscellaneous phrase and other declarations needed to support the dialogue director.</p>

<ul class="toc"><li><a href="dlg.html#SP1">&#167;1. Dialogue support</a></li></ul><hr class="tocbar">

<p class="commentary firstcommentary"><a id="SP1" class="paragraph-anchor"></a><b>&#167;1. Dialogue support.</b> </p>

<pre class="displayed-code all-displayed-code code-font">
<span class="plain-syntax">Part Eight - Dialogue</span>

<span class="plain-syntax">Chapter 1 - Fallback Implementation (not for dialogue language element)</span>

<span class="plain-syntax">Section 1 - Interface to action machinery - unindexed</span>

<span class="plain-syntax">To abide by dialogue before action choices:</span>
<span class="plain-syntax">    do nothing.</span>

<span class="plain-syntax">To abide by dialogue instead action choices:</span>
<span class="plain-syntax">    do nothing.</span>

<span class="plain-syntax">To abide by dialogue after action choices:</span>
<span class="plain-syntax">    do nothing.</span>

<span class="plain-syntax">Chapter 1 - Full Implementation (for dialogue language element only)</span>

<span class="plain-syntax">Section 1 - Performance styles</span>

<span class="plain-syntax">There is a performance style called spoken normally.</span>

<span class="plain-syntax">Section 2 - Dialogue beats</span>

<span class="plain-syntax">A dialogue beat can be performed or unperformed. A dialogue beat is usually</span>
<span class="plain-syntax">unperformed.</span>
<span class="plain-syntax">A dialogue beat can be recurring or non-recurring. A dialogue beat is usually</span>
<span class="plain-syntax">non-recurring.</span>
<span class="plain-syntax">A dialogue beat can be spontaneous or unspontaneous. A dialogue beat is usually</span>
<span class="plain-syntax">unspontaneous.</span>
<span class="plain-syntax">A dialogue beat can be voluntary or involuntary. A dialogue beat is usually</span>
<span class="plain-syntax">voluntary.</span>

<span class="plain-syntax">The performed property is accessible to Inter as "performed".</span>
<span class="plain-syntax">The spontaneous property is accessible to Inter as "spontaneous".</span>
<span class="plain-syntax">The voluntary property is accessible to Inter as "voluntary".</span>
<span class="plain-syntax">The recurring property is accessible to Inter as "recurring".</span>

<span class="plain-syntax">Definition: A dialogue beat is available rather than unavailable if Inter routine</span>
<span class="plain-syntax">    "DirectorBeatAvailable" says so (it meets all its after or before, if and unless conditions).</span>

<span class="plain-syntax">Definition: A dialogue beat is relevant rather than irrelevant if Inter routine</span>
<span class="plain-syntax">    "DirectorBeatRelevant" says so (one of the topics it is about is currently live).</span>

<span class="plain-syntax">Definition: A dialogue beat is being performed if Inter routine</span>
<span class="plain-syntax">    "DirectorBeatBeingPerformed" says so (it is currently having its lines performed).</span>

<span class="plain-syntax">Topicality relates a dialogue beat (called B) to an object (called S) when about B matches S.</span>

<span class="plain-syntax">Performability relates a dialogue beat (called B) to an object (called S) when S can have B performed.</span>

<span class="plain-syntax">The verb to be about means the topicality relation.</span>

<span class="plain-syntax">The verb to be performable to means the performability relation.</span>

<span class="plain-syntax">To decide if about (B - dialogue beat) matches (S - object):</span>
<span class="plain-syntax">    (- (DirectorBeatAbout({B}, {S})) -).</span>

<span class="plain-syntax">To decide if (S - object) can have (B - dialogue beat) performed:</span>
<span class="plain-syntax">    (- (DirectorBeatAccessible({B}, {S})) -).</span>

<span class="plain-syntax">To decide what list of objects is the list of speakers required by (B - dialogue beat)</span>
<span class="plain-syntax">    (documented at ph_listofspeakers):</span>
<span class="plain-syntax">    (- DirectorBeatRequiredList({-new:list of objects}, {B}) -).</span>

<span class="plain-syntax">To decide what dialogue line is the opening line of (B - dialogue beat):</span>
<span class="plain-syntax">    (- DirectorBeatOpeningLine({B}) -).</span>

<span class="plain-syntax">To perform (B - a dialogue beat)</span>
<span class="plain-syntax">    (documented at ph_performbeat):</span>
<span class="plain-syntax">    (- DirectorPerformBeat({B}); -).</span>

<span class="plain-syntax">To decide which object is the first speaker of (B - dialogue beat)</span>
<span class="plain-syntax">    (documented at ph_firstspeaker):</span>
<span class="plain-syntax">    (- (DirectorBeatFirstSpeaker({B})) -).</span>

<span class="plain-syntax">To decide whether dialogue/dialog about (O - an object) intervenes</span>
<span class="plain-syntax">    (documented at ph_dialogueintervenes):</span>
<span class="plain-syntax">    (- DirectorIntervenes({O}, nothing) -).</span>
<span class="plain-syntax">To decide whether dialogue/dialog about (O - an object) led by (P - an object) intervenes</span>
<span class="plain-syntax">    (documented at ph_dialogueintervenesled):</span>
<span class="plain-syntax">    (- DirectorIntervenes({O}, {P}) -).</span>

<span class="plain-syntax">To showme the beat structure of (B - dialogue beat)</span>
<span class="plain-syntax">    (documented at ph_showmebeat):</span>
<span class="plain-syntax">    (- DirectorDisassemble({B}); -).</span>

<span class="plain-syntax">Section 3 - Dialogue lines</span>

<span class="plain-syntax">A dialogue line can be performed or unperformed. A dialogue line is usually</span>
<span class="plain-syntax">unperformed.</span>
<span class="plain-syntax">A dialogue line can be recurring or non-recurring. A dialogue line is usually</span>
<span class="plain-syntax">non-recurring.</span>
<span class="plain-syntax">A dialogue line can be elaborated or unelaborated. A dialogue line is usually</span>
<span class="plain-syntax">unelaborated.</span>

<span class="plain-syntax">To decide what text is the textual content of (L - dialogue line):</span>
<span class="plain-syntax">    (- DirectorLineContent({L}, {-new:text}) -).</span>

<span class="plain-syntax">To decide what object is the current dialogue line speaker:</span>
<span class="plain-syntax">    (- DirectorCurrentLineSpeaker() -).</span>
<span class="plain-syntax">To decide what object is the current dialogue line interlocutor:</span>
<span class="plain-syntax">    (- DirectorCurrentLineInterlocutor() -).</span>

<span class="plain-syntax">Definition: A dialogue line is available rather than unavailable if Inter routine</span>
<span class="plain-syntax">    "DirectorLineAvailable" says so (it meets all its if and unless conditions).</span>

<span class="plain-syntax">Definition: A dialogue line is narrated rather than unnarrated if Inter routine</span>
<span class="plain-syntax">    "DirectorLineNarrated" says so (it is a Narration line rather than what somebody is saying).</span>

<span class="plain-syntax">Definition: A dialogue line is non-verbal rather than verbal if Inter routine</span>
<span class="plain-syntax">    "DirectorLineNonverbal" says so (it is a non-verbal communication, like a gesture).</span>

<span class="plain-syntax">Section 4 - Dialogue choices</span>

<span class="plain-syntax">A dialogue choice can be performed or unperformed. A dialogue choice is usually</span>
<span class="plain-syntax">unperformed.</span>
<span class="plain-syntax">A dialogue choice can be recurring or non-recurring. A dialogue choice is usually</span>
<span class="plain-syntax">non-recurring.</span>

<span class="plain-syntax">Definition: A dialogue choice is flowing rather than offered if Inter routine</span>
<span class="plain-syntax">    "DirectorChoiceFlowing" says so (it is a flow-control point rather than an option).</span>

<span class="plain-syntax">Definition: A dialogue choice is story-ending if Inter routine</span>
<span class="plain-syntax">    "DirectorChoiceStoryEnding" says so (it is a flow marker to an end of the story).</span>

<span class="plain-syntax">To decide what text is the textual content of (C - dialogue choice):</span>
<span class="plain-syntax">    (- DirectorChoiceTextContent({C}, {-new:text}) -).</span>

<span class="plain-syntax">To decide what list of dialogue choices is the current choice list</span>
<span class="plain-syntax">    (documented at ph_dialoguechoices):</span>
<span class="plain-syntax">    (- DirectorCurrentChoiceList() -).</span>

<span class="plain-syntax">Section 5 - List of live conversational subjects</span>

<span class="plain-syntax">To make (T - an object) a live conversational subject</span>
<span class="plain-syntax">    (documented at ph_makelive):</span>
<span class="plain-syntax">    (- DirectorAddLiveSubjectList({T}); -).</span>
<span class="plain-syntax">To make (T - an object) a dead conversational subject</span>
<span class="plain-syntax">    (documented at ph_makedead):</span>
<span class="plain-syntax">    (- DirectorRemoveLiveSubjectList({T}); -).</span>
<span class="plain-syntax">To clear conversational subjects</span>
<span class="plain-syntax">    (documented at ph_clearsubjects):</span>
<span class="plain-syntax">    (- DirectorEmptyLiveSubjectList(); -).</span>
<span class="plain-syntax">To decide what list of objects is the/-- live conversational subject list</span>
<span class="plain-syntax">    (documented at ph_getlivelist):</span>
<span class="plain-syntax">    (- DirectorLiveSubjectList({-new:list of objects}) -).</span>
<span class="plain-syntax">To alter the/-- live conversational subject list to (L - list of objects)</span>
<span class="plain-syntax">    (documented at ph_setlivelist):</span>
<span class="plain-syntax">    (- DirectorAlterLiveSubjectList({-by-reference:L}); -).</span>

<span class="plain-syntax">Section 7 - The dialogue director</span>

<span class="plain-syntax">To make the dialogue/dialog director active</span>
<span class="plain-syntax">    (documented at ph_directoractive):</span>
<span class="plain-syntax">    (- DirectorActivate(); -).</span>

<span class="plain-syntax">To make the dialogue/dialog director passive/inactive</span>
<span class="plain-syntax">    (documented at ph_directorpassive):</span>
<span class="plain-syntax">    (- DirectorDeactivate(); -).</span>

<span class="plain-syntax">To decide whether dialogue has been performed this turn</span>
<span class="plain-syntax">    (documented at ph_dialoguethisturn):</span>
<span class="plain-syntax">    (- (line_performance_count &gt; 0) -).</span>

<span class="plain-syntax">The dialogue direction rule is listed in the turn sequence rulebook.</span>
<span class="plain-syntax">The dialogue direction rule is defined by Inter as "DIALOGUE_DIRECTION_R".</span>

<span class="plain-syntax">The performing opening dialogue beat rule is listed in the startup rulebook.</span>
<span class="plain-syntax">The performing opening dialogue beat rule is defined by Inter as "PERFORM_OPENING_BEAT_R".</span>

<span class="plain-syntax">Section 8 - Interface to action machinery - unindexed</span>

<span class="plain-syntax">To decide what performance style is the current dialogue line style:</span>
<span class="plain-syntax">    (- DirectorCurrentLineStyle() -).</span>

<span class="plain-syntax">To abide by dialogue before action choices:</span>
<span class="plain-syntax">    (- if (DirectorBeforeAction()) rtrue; -).</span>

<span class="plain-syntax">To abide by dialogue instead action choices:</span>
<span class="plain-syntax">    (- if (DirectorInsteadAction()) rtrue; -).</span>

<span class="plain-syntax">To abide by dialogue after action choices:</span>
<span class="plain-syntax">    (- if (DirectorAfterAction()) rtrue; -).</span>

<span class="plain-syntax">Section 9 - Dialogue activities</span>

<span class="plain-syntax">Offering something (documented at act_offering) is an activity on lists of dialogue choices.</span>
<span class="plain-syntax">The offering activity is accessible to Inter as "OFFERING_A_DIALOGUE_CHOICE".</span>

<span class="plain-syntax">Last for offering a list of dialogue choices (called L)</span>
<span class="plain-syntax">    (this is the default offering dialogue choices rule):</span>
<span class="plain-syntax">    let N be 0;</span>
<span class="plain-syntax">    repeat with C running through L:</span>
<span class="plain-syntax">        increase N by 1;</span>
<span class="plain-syntax">        say "([N]) [textual content of C][line break]";</span>
<span class="plain-syntax">    say conditional paragraph break;</span>
<span class="plain-syntax">    let M be a number chosen by the player from 1 to N;</span>
<span class="plain-syntax">    set the dialogue selection value to M;</span>
<span class="plain-syntax">    say "[bold type][textual content of entry M of L][roman type][paragraph break]".</span>

<span class="plain-syntax">To set the dialogue selection value to (M - a number):</span>
<span class="plain-syntax">    (- dialogue_selection_value = {M}; -).</span>

<span class="plain-syntax">Performing something (documented at act_performing) is an activity on dialogue lines.</span>
<span class="plain-syntax">The performing activity is accessible to Inter as "PERFORMING_DIALOGUE".</span>

<span class="plain-syntax">The performing activity has an object called the speaker.</span>

<span class="plain-syntax">The performing activity has an object called the interlocutor.</span>

<span class="plain-syntax">The performing activity has a performance style called the style.</span>

<span class="plain-syntax">Before performing a dialogue line:</span>
<span class="plain-syntax">    now the speaker is the current dialogue line speaker;</span>
<span class="plain-syntax">    now the interlocutor is the current dialogue line interlocutor;</span>
<span class="plain-syntax">    now the style is the current dialogue line style.</span>

<span class="plain-syntax">For performing a dialogue line (called L)</span>
<span class="plain-syntax">    (this is the default dialogue performance rule):</span>
<span class="plain-syntax">    if L is narrated or L is elaborated or L is non-verbal:</span>
<span class="plain-syntax">        say "[textual content of L][line break]";</span>
<span class="plain-syntax">    otherwise:</span>
<span class="plain-syntax">        say "[The speaker]";</span>
<span class="plain-syntax">        if the interlocutor is something:</span>
<span class="plain-syntax">            say " (to [the interlocutor])";</span>
<span class="plain-syntax">        say ": '[textual content of L]'[line break]".</span>
</pre>
<div class="lsmarkdown">
<p class="commentary firstcommentary"><a id="SP2" class="paragraph-anchor"></a><b>&#167;2. </b>  The dialogue system offers an action &quot;talking about&quot;, but not &quot;talking to X about&quot;:
this is a model of conversation which is aimed at simulating multi-person encounters,
where lines are spoken more into the room than at any one person.</p>
</div>
<pre class="displayed-code all-displayed-code code-font">
<span class="plain-syntax">Section 10 - Dialogue-related actions</span>

<span class="plain-syntax">Talking about is an action applying to one object.</span>

<span class="plain-syntax">The talking about action has a list of dialogue beats called the leading beats.</span>

<span class="plain-syntax">The talking about action has a list of dialogue beats called the other beats.</span>

<span class="plain-syntax">Before an actor talking about an object (called T):</span>
<span class="plain-syntax">    repeat with B running through available dialogue beats about T:</span>
<span class="plain-syntax">        if B is performable to the actor:</span>
<span class="plain-syntax">            if the first speaker of B is the actor:</span>
<span class="plain-syntax">                add B to the leading beats;</span>
<span class="plain-syntax">            otherwise:</span>
<span class="plain-syntax">                add B to the other beats;</span>

<span class="plain-syntax">Carry out an actor talking about an object (called T)</span>
<span class="plain-syntax">    (this is the first-declared beat rule):</span>
<span class="plain-syntax">    if the leading beats is not empty:</span>
<span class="plain-syntax">        perform entry 1 of the leading beats;</span>
<span class="plain-syntax">        if dialogue has been performed this turn:</span>
<span class="plain-syntax">            continue the action;</span>
<span class="plain-syntax">    if the other beats is not empty:</span>
<span class="plain-syntax">        perform entry 1 of the other beats;</span>
<span class="plain-syntax">        if dialogue has been performed this turn:</span>
<span class="plain-syntax">            continue the action;</span>
<span class="plain-syntax">    if the player is the actor:</span>
<span class="plain-syntax">        say "There is no reply." (A);</span>
<span class="plain-syntax">        stop the action;</span>
<span class="plain-syntax">    otherwise:</span>
<span class="plain-syntax">        if the player can hear the actor:</span>
<span class="plain-syntax">            say "[The actor] [talk] about [T]." (B);</span>
<span class="plain-syntax">        stop the action.</span>
</pre>
<nav role="progress"><div class="progresscontainer">
    <ul class="progressbar"><li class="progressprev"><a href="var.html">&#10094;</a></li><li class="progresssection"><a href="prmbl.html">prmbl</a></li><li class="progresssection"><a href="pwm.html">pwm</a></li><li class="progresssection"><a href="var.html">var</a></li><li class="progresscurrent">dlg</li><li class="progresssection"><a href="actvt.html">actvt</a></li><li class="progresssection"><a href="actns.html">actns</a></li><li class="progresssection"><a href="cmgr.html">cmgr</a></li><li class="progresssection"><a href="phdf.html">phdf</a></li><li class="progressnext"><a href="actvt.html">&#10095;</a></li></ul></div>
</nav><!-- End of weave -->

		</main>
	</body>
</html>

